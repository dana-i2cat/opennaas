<?xml version="1.0" encoding="UTF-8"?>
<features>
	<repository>mvn:org.opennaas/opennaas-core-features/${opennaas.version}/xml/features</repository>

	<feature name="opennaas-alarms" version="${project.version}">
		<bundle>mvn:net.i2cat.nexus/net.i2cat.nexus.alarms.repository/${project.version}</bundle>
	</feature>

	<feature name="opennaas-cim" version="${project.version}">
		<feature version="${opennaas.version}">opennaas-core</feature>

		<!-- The core model unfortunately depends on the network model
		     - it should be the other way around. -->
		<bundle>mvn:net.i2cat.mantychore.network/net.i2cat.mantychore.network.model/${project.version}</bundle>
		<bundle>mvn:net.i2cat.mantychore.model/net.i2cat.mantychore.model/${project.version}</bundle>

		<!-- QueueManager should probably be part of opennaas-core,
		     but we have to rename and move the project before we can
		     make it part of the correct feature. -->
		<bundle>mvn:net.i2cat.mantychore.queuemanager/net.i2cat.mantychore.queuemanager/${project.version}</bundle>
	</feature>

	<feature name="opennaas-netconf" version="${project.version}">
		<feature version="${opennaas.version}">opennaas-core</feature>

		<bundle dependency="true">mvn:javax.mail/mail/${javamail.version}</bundle>
		<bundle dependency="true">mvn:org.apache.commons/com.springsource.org.apache.commons.beanutils/${beanutils.version}</bundle>
		<bundle dependency="true">mvn:org.apache.geronimo.specs/geronimo-servlet_2.5_spec/${geronimo.servlet.version}</bundle>
		<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-collections/${commons.collections.version}</bundle>
		<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-jxpath/${commons.jxpath.version}</bundle>
		<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-lang/${commons.lang.version}</bundle>
		<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.ant/${ant.version}</bundle>
		<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.oro/${oro.version}</bundle>
		<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.velocity/${servicemix.velocity.version}</bundle>
		<bundle dependency="true">mvn:commons-configuration/commons-configuration/${commons.configuration.version}</bundle>
		<bundle dependency="true">mvn:commons-codec/commons-codec/${commons.codec.version}</bundle>
		<bundle dependency="true">mvn:commons-io/commons-io/${commons.io.version}</bundle>
		<bundle dependency="true">mvn:commons-digester/commons-digester/${commons.digester.version}</bundle>

		<bundle>mvn:net.i2cat.netconf/netconf4j/${netconf4j.version}</bundle>
		<bundle>mvn:net.i2cat.mantychore.protocols/net.i2cat.mantychore.protocols.netconf/${project.version}</bundle>
		<!-- fragment, so no autostart -->
		<bundle start="false">mvn:net.i2cat.mantychore.fragment/net.i2cat.mantychore.fragment.velocity/${project.version}</bundle>
	</feature>

	<feature name="opennaas-junos" version="${project.version}">
		<feature version="${project.version}">opennaas-cim</feature>
		<feature version="${project.version}">opennaas-netconf</feature>

		<bundle>mvn:net.i2cat.mantychore.actionsets/net.i2cat.mantychore.actionsets.junos/${project.version}</bundle>
	</feature>

	<feature name="opennaas-router" version="${project.version}">
		<feature version="${project.version}">opennaas-cim</feature>

		<!-- The following dependency should be reversed, but as the
		     code is structured now things are upside down. -->
		<feature version="${project.version}">opennaas-junos</feature>

		<bundle>mvn:net.i2cat.mantychore.repository/net.i2cat.mantychore.repository/${project.version}</bundle>
		<bundle>mvn:net.i2cat.mantychore.capability/net.i2cat.mantychore.capability.chassis/${project.version}</bundle>
		<bundle>mvn:net.i2cat.mantychore.capability/net.i2cat.mantychore.capability.ip/${project.version}</bundle>
		<bundle>mvn:org.opennaas/opennaas.extension.router.capability.gretunnel/1.0.0-SNAPSHOT</bundle>
		<bundle>mvn:org.opennaas/opennaas.extension.router.capability.ospf/1.0.0-SNAPSHOT</bundle>
	</feature>

	<feature name="opennaas-network" version="${project.version}">
		<feature version="${project.version}">opennaas-cim</feature>

		<bundle>mvn:net.i2cat.mantychore.network/net.i2cat.mantychore.network.repository/${project.version}</bundle>
		<bundle>mvn:net.i2cat.mantychore.network/net.i2cat.mantychore.network.capability.basic/${project.version}</bundle>
		<bundle>mvn:org.opennaas/opennaas.extension.network.capability.queue/${project.version}</bundle>
	</feature>

	<feature name="opennaas-bod" version="${project.version}">
		<feature version="${project.version}">opennaas-cim</feature>

		<bundle>mvn:org.opennaas.bod.repository/org.opennaas.bod.repository/${project.version}</bundle>
		<bundle>mvn:org.opennaas.bod.capability/org.opennaas.bod.capability.l2bod/${project.version}</bundle>
		<bundle>mvn:org.opennaas.bod.actionsets/org.opennaas.bod.actionsets/${project.version}</bundle>
	</feature>

	<feature name="opennaas-luminis" version="${project.version}">
		<feature version="${project.version}">opennaas-cim</feature>

		<bundle dependency="true">mvn:com.wonesys/com.wonesys.emsModule/${project.version}</bundle>

		<bundle>mvn:net.i2cat.luminis.protocols/net.i2cat.luminis.protocols.wonesys/${project.version}</bundle>
		<bundle>mvn:net.i2cat.luminis.actionsets/net.i2cat.luminis.actionsets.wonesys/${project.version}</bundle>
		<bundle>mvn:net.i2cat.luminis.capability/net.i2cat.luminis.capability.connections/${project.version}</bundle>
		<bundle>mvn:net.i2cat.luminis.capability/net.i2cat.luminis.capability.monitoring/${project.version}</bundle>
		<bundle>mvn:net.i2cat.luminis.ROADM.repository/net.i2cat.luminis.ROADM.repository/${project.version}</bundle>
	</feature>

	<feature name="opennaas" version="${project.version}">
		<feature version="${project.version}">opennaas-alarms</feature>
		<feature version="${project.version}">opennaas-router</feature>
		<feature version="${project.version}">opennaas-network</feature>
		<feature version="${project.version}">opennaas-bod</feature>
		<feature version="${project.version}">opennaas-luminis</feature>
		<feature version="${project.version}">opennaas-platformmanager</feature>
	</feature>

	<feature name="nexus-tests-helper" version="${project.version}">
		<feature version="${opennaas.version}">opennaas-core</feature>
		<bundle>mvn:net.i2cat.nexus/net.i2cat.nexus.tests.helper/${project.version}</bundle>
	</feature>

	<feature name="nexus-testprofile" version="${project.version}">
		<feature version="${opennaas.version}">opennaas-core</feature>
		<bundle>mvn:org.opennaas/opennaas-core-tests-mockprofile/${project.version}</bundle>
	</feature>

</features>
